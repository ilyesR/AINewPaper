# ğŸ—ï¸ Architecture de l'API

## Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UTILISATEUR                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                         â”‚
        â”‚  Interface Web (static/index.html)      â”‚
        â”‚  ou                                     â”‚
        â”‚  Client HTTP (curl, Python, etc.)       â”‚
        â”‚                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API FastAPI (api.py)                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   GET /      â”‚  â”‚ GET /health  â”‚  â”‚ GET /docs    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚POST /researchâ”‚  â”‚ GET /results â”‚  â”‚ GET /latest  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  GET /list   â”‚  â”‚ DELETE /... â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenAI API Client                         â”‚
â”‚                                                              â”‚
â”‚  - GPT-5 (ou autre modÃ¨le)                                  â”‚
â”‚  - Web Search Tool                                          â”‚
â”‚  - Reasoning & Test-time compute                           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          Stockage Local (outputs/)      â”‚
        â”‚                                         â”‚
        â”‚  - {id}_output.txt                      â”‚
        â”‚  - {id}_metadata.json                   â”‚
        â”‚                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flux de donnÃ©es

### 1. CrÃ©ation d'une recherche (POST /research)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â”€â”€â–¶â”‚   API    â”‚â”€â”€â”€â”€â”€â–¶â”‚  OpenAI  â”‚â”€â”€â”€â”€â”€â–¶â”‚ Stockage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                  â”‚                  â”‚
     â”‚ 1. POST        â”‚ 2. Appel API    â”‚ 3. Web Search   â”‚
     â”‚ /research      â”‚                  â”‚ + Reasoning     â”‚
     â”‚                â”‚                  â”‚                 â”‚
     â”‚                â”‚ 4. RÃ©ponse      â”‚ 5. Sauvegarde   â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚ 6. research_id â”‚                  â”‚                 â”‚
     â”‚                â”‚                  â”‚                 â”‚
```

### 2. RÃ©cupÃ©ration d'un rÃ©sultat (GET /results/{id})

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â”€â”€â–¶â”‚   API    â”‚â”€â”€â”€â”€â”€â–¶â”‚ Stockage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                  â”‚
     â”‚ 1. GET         â”‚ 2. Lecture       â”‚
     â”‚ /results/id    â”‚                  â”‚
     â”‚                â”‚                  â”‚
     â”‚                â”‚ 3. DonnÃ©es       â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚ 4. JSON/Text   â”‚                  â”‚
     â”‚                â”‚                  â”‚
```

## Structure des fichiers

```
api.py (Application principale)
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ API_KEY (depuis env)
â”‚   â”œâ”€â”€ OUTPUT_DIR
â”‚   â”œâ”€â”€ MODEL
â”‚   â”œâ”€â”€ VERBOSITY
â”‚   â””â”€â”€ REASONING_EFFORT
â”‚
â”œâ”€â”€ ModÃ¨les Pydantic
â”‚   â”œâ”€â”€ ResearchRequest
â”‚   â””â”€â”€ ResearchResponse
â”‚
â”œâ”€â”€ Fonction principale
â”‚   â””â”€â”€ perform_research()
â”‚       â”œâ”€â”€ CrÃ©er client OpenAI
â”‚       â”œâ”€â”€ PrÃ©parer les messages
â”‚       â”œâ”€â”€ Appeler l'API
â”‚       â”œâ”€â”€ Extraire la rÃ©ponse
â”‚       â””â”€â”€ Sauvegarder les rÃ©sultats
â”‚
â””â”€â”€ Endpoints FastAPI
    â”œâ”€â”€ GET  /              â†’ root()
    â”œâ”€â”€ GET  /health        â†’ health_check()
    â”œâ”€â”€ POST /research      â†’ create_research()
    â”œâ”€â”€ GET  /results/{id}  â†’ get_results()
    â”œâ”€â”€ GET  /latest        â†’ get_latest()
    â”œâ”€â”€ GET  /list          â†’ list_researches()
    â””â”€â”€ DELETE /results/{id} â†’ delete_research()
```

## Stack technique

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - HTML5 + CSS3 + JavaScript Vanilla                        â”‚
â”‚  - Fetch API pour les requÃªtes HTTP                        â”‚
â”‚  - Interface responsive                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - FastAPI 0.104+       (Framework web)                     â”‚
â”‚  - Uvicorn              (Serveur ASGI)                      â”‚
â”‚  - Pydantic 2.0+        (Validation de donnÃ©es)             â”‚
â”‚  - Python 3.11          (Runtime)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Services externes                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - OpenAI API           (IA gÃ©nÃ©rative)                     â”‚
â”‚  - Web Search Tool      (Recherche web)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Stockage                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - SystÃ¨me de fichiers  (outputs/*.txt, *.json)             â”‚
â”‚  - UUID pour identifiants uniques                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Infrastructure                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Railway.app          (HÃ©bergement)                       â”‚
â”‚  - Docker               (Conteneurisation - optionnel)      â”‚
â”‚  - Git/GitHub           (Versioning)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Variables d'environnement

```
Environment Variables
â”‚
â”œâ”€â”€ OPENAI_API_KEY              [REQUIS]
â”‚   â””â”€â”€ ClÃ© d'authentification OpenAI
â”‚
â”œâ”€â”€ PORT                        [OPTIONNEL - dÃ©faut: 8000]
â”‚   â””â”€â”€ Port d'Ã©coute du serveur
â”‚
â”œâ”€â”€ OPENAI_MODEL                [OPTIONNEL - dÃ©faut: gpt-5]
â”‚   â””â”€â”€ ModÃ¨le OpenAI Ã  utiliser
â”‚
â”œâ”€â”€ OPENAI_VERBOSITY            [OPTIONNEL - dÃ©faut: medium]
â”‚   â””â”€â”€ Niveau de dÃ©tail (low/medium/high)
â”‚
â””â”€â”€ OPENAI_REASONING_EFFORT     [OPTIONNEL - dÃ©faut: medium]
    â””â”€â”€ Effort de raisonnement (low/medium/high)
```

## Cycle de vie d'une recherche

```
1. CRÃ‰ATION
   â”œâ”€â”€ GÃ©nÃ©ration UUID
   â”œâ”€â”€ Validation des donnÃ©es (Pydantic)
   â””â”€â”€ Ã‰tat: pending

2. TRAITEMENT
   â”œâ”€â”€ Appel OpenAI API
   â”œâ”€â”€ Web Search (si nÃ©cessaire)
   â”œâ”€â”€ Raisonnement
   â””â”€â”€ Ã‰tat: in_progress

3. SAUVEGARDE
   â”œâ”€â”€ CrÃ©ation fichier output.txt
   â”œâ”€â”€ CrÃ©ation fichier metadata.json
   â””â”€â”€ Ã‰tat: completed

4. RÃ‰CUPÃ‰RATION
   â”œâ”€â”€ Lecture depuis outputs/
   â””â”€â”€ Retour JSON ou texte

5. SUPPRESSION (optionnel)
   â”œâ”€â”€ Suppression fichiers
   â””â”€â”€ Ã‰tat: deleted
```

## SÃ©curitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Couches de sÃ©curitÃ©                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Variables d'environnement                               â”‚
â”‚     â””â”€â”€ ClÃ©s API non hardcodÃ©es                            â”‚
â”‚                                                              â”‚
â”‚  2. .gitignore                                              â”‚
â”‚     â””â”€â”€ Secrets non versionnÃ©s                             â”‚
â”‚                                                              â”‚
â”‚  3. Validation Pydantic                                     â”‚
â”‚     â””â”€â”€ DonnÃ©es validÃ©es                                    â”‚
â”‚                                                              â”‚
â”‚  4. HTTPS (Railway)                                         â”‚
â”‚     â””â”€â”€ Communication chiffrÃ©e                              â”‚
â”‚                                                              â”‚
â”‚  5. [Ã€ ajouter] Authentification                            â”‚
â”‚     â””â”€â”€ API Keys / JWT                                      â”‚
â”‚                                                              â”‚
â”‚  6. [Ã€ ajouter] Rate Limiting                               â”‚
â”‚     â””â”€â”€ Protection contre abus                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ScalabilitÃ©

### Actuel (MVP)

```
Single Instance
â”‚
â”œâ”€â”€ Stockage: Fichiers locaux
â”œâ”€â”€ Concurrence: LimitÃ©e par l'instance
â””â”€â”€ Ã‰tat: Stateful (fichiers)
```

### Ã‰volution possible (Future)

```
Multiple Instances
â”‚
â”œâ”€â”€ Stockage: Base de donnÃ©es (PostgreSQL)
â”‚   â””â”€â”€ Recherches persistantes
â”‚
â”œâ”€â”€ Cache: Redis
â”‚   â””â”€â”€ RÃ©sultats frÃ©quents
â”‚
â”œâ”€â”€ Queue: Celery + Redis
â”‚   â””â”€â”€ Traitements asynchrones
â”‚
â”œâ”€â”€ Load Balancer
â”‚   â””â”€â”€ Distribution de charge
â”‚
â””â”€â”€ Ã‰tat: Stateless (scale horizontal)
```

## Monitoring et logs

```
Application Logs
â”‚
â”œâ”€â”€ Print statements
â”‚   â””â”€â”€ Logs console
â”‚
â”œâ”€â”€ Railway Logs
â”‚   â””â”€â”€ Logs centralisÃ©s
â”‚
â”œâ”€â”€ [Ã€ ajouter] Structured logging
â”‚   â””â”€â”€ JSON logs
â”‚
â””â”€â”€ [Ã€ ajouter] Monitoring
    â”œâ”€â”€ MÃ©triques (Prometheus)
    â”œâ”€â”€ Tracing (Jaeger)
    â””â”€â”€ Alertes (PagerDuty)
```

## Points d'extension

### 1. Authentification
```python
from fastapi import Depends, HTTPException, Header

async def verify_api_key(x_api_key: str = Header(...)):
    if x_api_key != settings.API_SECRET:
        raise HTTPException(403)
    return x_api_key

@app.post("/research", dependencies=[Depends(verify_api_key)])
```

### 2. Base de donnÃ©es
```python
from sqlalchemy import create_engine
from databases import Database

database = Database(DATABASE_URL)

@app.on_event("startup")
async def startup():
    await database.connect()
```

### 3. Background tasks
```python
from fastapi import BackgroundTasks

@app.post("/research")
async def create_research(
    request: ResearchRequest,
    background_tasks: BackgroundTasks
):
    research_id = generate_id()
    background_tasks.add_task(perform_research, ...)
    return {"research_id": research_id, "status": "pending"}
```

### 4. Webhooks
```python
async def notify_completion(webhook_url: str, data: dict):
    async with httpx.AsyncClient() as client:
        await client.post(webhook_url, json=data)
```

## Performances

### Temps de rÃ©ponse typiques

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Endpoint      â”‚   Temps moyen   â”‚   Cacheable   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /health      â”‚     < 10ms      â”‚      âœ…       â”‚
â”‚ GET /list        â”‚     < 50ms      â”‚      âœ…       â”‚
â”‚ GET /results     â”‚     < 100ms     â”‚      âœ…       â”‚
â”‚ POST /research   â”‚   2-10 minutes  â”‚      âŒ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Optimisations possibles

1. **Cache des rÃ©sultats** (Redis)
2. **Compression** (gzip)
3. **CDN** pour fichiers statiques
4. **Database indexes**
5. **Connection pooling**

---

## ğŸ”— Diagrammes de sÃ©quence

### RequÃªte simple (GET /health)

```
Client          API
  â”‚              â”‚
  â”‚â”€â”€â”€â”€â”€GETâ”€â”€â”€â”€â”€â–¶â”‚
  â”‚  /health     â”‚
  â”‚              â”‚
  â”‚â—€â”€â”€â”€â”€200â”€â”€â”€â”€â”€â”‚
  â”‚   { ... }    â”‚
  â”‚              â”‚
```

### RequÃªte complexe (POST /research)

```
Client      API         OpenAI      Stockage
  â”‚          â”‚            â”‚            â”‚
  â”‚â”€â”€POSTâ”€â”€â”€â–¶â”‚            â”‚            â”‚
  â”‚/research â”‚            â”‚            â”‚
  â”‚          â”‚            â”‚            â”‚
  â”‚          â”‚â”€â”€â”€Callâ”€â”€â”€â”€â–¶â”‚            â”‚
  â”‚          â”‚  API       â”‚            â”‚
  â”‚          â”‚            â”‚            â”‚
  â”‚          â”‚            â”‚â”€â”€Searchâ”€â”€â”€â–¶â”‚
  â”‚          â”‚            â”‚  Web       â”‚
  â”‚          â”‚            â”‚            â”‚
  â”‚          â”‚â—€â”€â”€Resultâ”€â”€â”‚            â”‚
  â”‚          â”‚            â”‚            â”‚
  â”‚          â”‚â”€â”€â”€â”€â”€â”€Saveâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚          â”‚            â”‚            â”‚
  â”‚â—€â”€200â”€â”€â”€â”€â”‚            â”‚            â”‚
  â”‚{id,txt}  â”‚            â”‚            â”‚
  â”‚          â”‚            â”‚            â”‚
```

---

**Cette architecture est conÃ§ue pour Ãªtre :**
- âœ… Simple Ã  comprendre
- âœ… Facile Ã  dÃ©ployer
- âœ… Extensible pour le futur
- âœ… SÃ©curisÃ©e par dÃ©faut

